/*************************************1*****************************************
 *
 * Module: ATM Card
 *
 * File Name: Card.c
 *
 * Description: Source file for the ATM Card
 *
 * Author: Youssef ElSayyad
 *
 *******************************************************************************/
#include "Card.h"
/*******************************************************************************
 *                      Functions Definitions                                  *
 *******************************************************************************/
/* Description : Function Receives IBAN from the PC terminal via UART */
void IBAN_Recieve(char *IBAN) {
	USART_receiveString(&IBAN);
}
/* Description : Function sends the IBAN to ATM Machine ECU via SPI */
void IBAN_Send(char *IBAN) {
	SPI_sendReceiveByte(&IBAN);
}
int main() {
	/*String to receive the IBAN from PC terminal*/
	char IBAN[11];
	/*USART Structure Configuration
	 * Mode:ASYNCHRONZIED
	 * Parity:DISABLED
	 * STOP_BIT: ONEBIT
	 * BIT-DATA: 8BITS
	 * BAUD RATE:9600			*/
	USART_ConfigType Config_Ptr = { ASYNCH, DISABLED, ONEBIT, EIGHTBITS, 9600 };

	/*Initializing the USART*/
	USART_init(&Config_Ptr);

	/*Initializing the SPI*/
	SPI_initMaster();

	/*Receiving the IBAN via UART*/
	IBAN_Recieve(&IBAN);

	/*Initializing the SPI*/
	IBAN_Send(&IBAN);
}
